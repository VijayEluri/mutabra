<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
		xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9 http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">

	<changeSet id="00" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="RACE">
			<column name="ID" type="INTEGER" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="CODE" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>
			<column name="VERSION" type="INTEGER" defaultValueNumeric="0">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addUniqueConstraint constraintName="UK_RACE_CODE"
							 tableName="RACE" columnNames="CODE"/>

		<rollback>
			<dropTable tableName="RACE"/>
		</rollback>
	</changeSet>

	<changeSet id="01" author="ikhalopik@gmail.com" context="schema">
		<addColumn tableName="HERO">
			<column name="ID_RACE" type="INTEGER" defaultValueNumeric="1">
				<constraints nullable="false"/>
			</column>
		</addColumn>

		<dropDefaultValue tableName="HERO" columnName="ID_RACE"/>

		<addForeignKeyConstraint constraintName="FK_HERO_RACE"
								 baseTableName="HERO" baseColumnNames="ID_RACE"
								 referencedTableName="RACE" referencedColumnNames="ID"/>

		<rollback>
			<dropForeignKeyConstraint baseTableName="HERO" constraintName="FK_HERO_RACE"/>
			<dropColumn tableName="HERO" columnName="ID_RACE"/>
		</rollback>
	</changeSet>


</databaseChangeLog>