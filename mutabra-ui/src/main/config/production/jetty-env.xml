<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
<Configure id="mutabra" class="org.eclipse.jetty.webapp.WebAppContext">

    <New id="mail" class="org.eclipse.jetty.plus.jndi.Resource">
        <Arg>mail/session</Arg>
        <Arg>
            <New class="org.eclipse.jetty.jndi.factories.MailSessionReference">
                <Set name="user">
                    <Call name="getenv" class="java.lang.System" id="robotId">
                        <Arg>ROBOT_ID</Arg>
                    </Call>
                </Set>
                <Set name="password">
                    <Call name="getenv" class="java.lang.System" id="robotSecret">
                        <Arg>ROBOT_SECRET</Arg>
                    </Call>
                </Set>
                <Set name="properties">
                    <New class="java.util.Properties">
                        <Put name="mail.user"><Ref id="robotId"/></Put>
                        <Put name="mail.password"><Ref id="robotSecret"/></Put>
                        <Put name="mail.from"><Ref id="robotId"/></Put>
                        <Put name="mail.transport.protocol">smtp</Put>

                        <Put name="mail.smtp.host">smtp.gmail.com</Put>
                        <Put name="mail.smtp.socketFactory.class">javax.net.ssl.SSLSocketFactory</Put>
                        <Put name="mail.smtp.socketFactory.port">465</Put>
                        <Put name="mail.smtp.port">465</Put>
                        <Put name="mail.smtp.auth">true</Put>
                        <Put name="mail.debug">true</Put>
                    </New>
                </Set>
            </New>
        </Arg>
    </New>

</Configure>
