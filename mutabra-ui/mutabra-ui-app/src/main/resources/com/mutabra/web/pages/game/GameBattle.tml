<html t:type="layout/default"
	  xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
	  xmlns:p="tapestry:parameter">

<h2>${message:label.round}: ${battle.round}</h2>

<div class="unit">
	<div class="column">
		<t:game.memberdisplay value="opponent"/>
	</div>
	<div class="column">
		<t:game.memberdisplay value="you"/>
	</div>
</div>

<div class="unit" align="center">
	<svg xmlns="http://www.w3.org/2000/svg" height="400" width="400" version="1.1">
		<t:loop source="positions" value="position">
			<t:game.fieldcell x="x" y="y" empty="empty" selected="selected"/>
		</t:loop>
	</svg>
</div>

<t:loop source="members" value="member">
	<div class="unit" id="f_${member.position}_info" style="display:none;">
		<div class="column">
			<t:game.memberdisplay value="member"/>
		</div>
		<div class="column">
			<div class="hand">
				<t:loop source="member.hand" value="card">
					<t:game.carddisplay value="card.card.card"/>
				</t:loop>
			</div>
		</div>
	</div>
</t:loop>

<script type="text/javascript">
	j$(function() {
		var selected = j$('path.selected');
		j$('#' + selected.attr('id') + '_info').show();

		j$('path').click(function(e) {
			if (selected) {
				j$('#' + selected.attr('id') + '_info').hide();
				selected.attr('class', selected.attr('class').replace('selected', ''));
			}
			selected = j$(this);
			j$('#' + selected.attr('id') + '_info').show();
			selected.attr('class', selected.attr('class') + ' selected');
		});
	});
</script>
</html>
