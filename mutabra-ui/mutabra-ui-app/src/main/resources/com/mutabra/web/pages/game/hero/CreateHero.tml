<html t:type="layout/default"
	  xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
	  xmlns:p="tapestry:parameter">

<t:form>
	<div class="unit">
		<div class="column">
			<div class="t-beaneditor-row">
				<t:game.raceselect value="value.race" callback="raceChangeCallback"/>
			</div>
		</div>
		<div class="column">
			<t:loop source="races" value="row" index="index">
				<div id="race-${index}" class="t-beaneditor-row" style="display:none;">
					${row:description}
				</div>
			</t:loop>
		</div>
	</div>

	<div class="unit">
		<div class="column">
			<div class="t-beaneditor-row">
				<t:game.faceselect value="value.face"/>
			</div>
		</div>
		<div class="column">
			<div class="t-beaneditor-row">
				<t:label for="name"/>
				<t:textfield t:id="name" value="value.name" validate="required" label="message:label.name"/>
			</div>
			<div class="t-beaneditor-row">
				<t:label for="level"/>
				<t:textfield t:id="level" value="value.level:name" disabled="true" label="message:label.level"/>
			</div>
		</div>
	</div>

	<t:menu class="toolbar" items="create,cancel">
		<p:createMenuItem>
			<t:submit value="message:label.create" class="btn"/>
		</p:createMenuItem>
	</t:menu>
</t:form>

<script type="text/javascript">
	var selectedRace;
	var raceChangeCallback = function(carousel, item, index) {
		if (selectedRace) {
			selectedRace.hide();
		}
		selectedRace = j$("#race-" + (index-1));
		selectedRace.show();
	};
</script>

</html>
