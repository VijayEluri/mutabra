<t:container xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd">

    <div class="row">
        <div class="field">
            <svg id="battle-field" xmlns="http://www.w3.org/2000/svg" height="300" width="500" version="1.1">
                <t:loop source="fields" value="field">
                    <t:game.fielddisplay field="field">
                        <t:if test="field.hasHero()">
                            <t:svg type="faces" image="field.hero.hero.face.code" inline="true" width="90" height="90" x="50" y="5"/>
                        </t:if>
                        <t:if test="field.hasCreature()">
                            <t:svg type="faces" image="field.creature.card.code" inline="true" width="90" height="90" x="50" y="5"/>
                        </t:if>
                    </t:game.fielddisplay>
                </t:loop>
            </svg>
        </div>
        <div class="log">Log</div>
    </div>

    <div class="row">
        <div class="span4">
            <div class="row">
                <t:loop source="fields" value="field">
                    <t:if test="field.hasHero()">
                        <t:game.herodescription value="field.hero" active="!field.enemySide"/>
                        <t:if test="!field.enemySide">
                            <t:loop source="field.hero.hand" value="card">
                                <t:game.carddescription value="card"/>
                            </t:loop>
                        </t:if>
                    </t:if>
                    <t:if test="field.hasCreature()">
                        <t:game.creaturedescription value="field.creature"/>
                        <t:if test="!field.enemySide">
                            <t:loop source="field.creature.card.abilities" value="ability">
                                <t:game.abilitydescription value="ability"/>
                            </t:loop>
                        </t:if>
                    </t:if>
                </t:loop>
                <t:game.skipturndescription/>
            </div>
        </div>

        <div class="span8">
            <t:loop source="fields" value="field">
                <t:if test="field.hasUnit()">
                    <div id="actions_${field.position.id}" class="${actionsClass}">
                        <t:if test="!field.enemySide">
                            <t:if test="field.hasHero()">
                                <t:loop source="field.hero.hand" value="card">
                                    <t:game.carddisplay value="card" hero="field.hero"/>
                                </t:loop>
                            </t:if>
                            <t:if test="field.hasCreature()">
                                <t:loop source="field.creature.card.abilities" value="ability">
                                    <t:game.abilitydisplay value="ability" creature="field.creature"/>
                                </t:loop>
                            </t:if>
                            <t:game.skipturndisplay hero="you"/>
                        </t:if>
                    </div>
                </t:if>
            </t:loop>
        </div>
    </div>

</t:container>
