<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
		xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9 http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">

	<changeSet id="00" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="TRANSLATION">
			<column name="ID" type="INTEGER" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="BASENAME" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>
			<column name="CODE" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>
			<column name="VARIANT" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>
			<column name="LOCALE" type="VARCHAR(10)">
				<constraints nullable="false"/>
			</column>
			<column name="VALUE" type="VARCHAR(1000)">
				<constraints nullable="false"/>
			</column>
			<column name="VERSION" type="INTEGER" defaultValueNumeric="0">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addUniqueConstraint constraintName="UK_TRANSLATION"
							 tableName="TRANSLATION" columnNames="BASENAME,CODE,VARIANT,LOCALE"/>

		<rollback>
			<dropTable tableName="TRANSLATION"/>
		</rollback>
	</changeSet>

	<changeSet id="01" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="ACCOUNT">
			<column name="ID" type="INTEGER" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="EMAIL" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>
			<column name="PASSWORD" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>
			<column name="REGISTRATION_DATE" type="DATE">
				<constraints nullable="true"/>
			</column>
			<column name="LAST_LOGIN_DATE" type="DATE">
				<constraints nullable="true"/>
			</column>
			<column name="VERSION" type="INTEGER" defaultValueNumeric="0">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addUniqueConstraint constraintName="UK_ACCOUNT_EMAIL"
							 tableName="ACCOUNT" columnNames="EMAIL"/>

		<rollback>
			<dropTable tableName="ACCOUNT"/>
		</rollback>
	</changeSet>

	<changeSet id="02" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="ROLE">
			<column name="ID" type="INTEGER" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="CODE" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>
			<column name="VERSION" type="INTEGER" defaultValueNumeric="0">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addUniqueConstraint constraintName="UK_ROLE_CODE"
							 tableName="ROLE" columnNames="CODE"/>

		<rollback>
			<dropTable tableName="ROLE"/>
		</rollback>
	</changeSet>

	<changeSet id="03" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="PERMISSION">
			<column name="ID" type="INTEGER" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="CODE" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>
			<column name="VERSION" type="INTEGER" defaultValueNumeric="0">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addUniqueConstraint constraintName="UK_PERMISSION_CODE"
							 tableName="PERMISSION" columnNames="CODE"/>

		<rollback>
			<dropTable tableName="PERMISSION"/>
		</rollback>
	</changeSet>

	<changeSet id="04" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="ROLE_PERMISSION">
			<column name="ID_ROLE" type="INTEGER">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="ID_PERMISSION" type="INTEGER">
				<constraints nullable="false" primaryKey="true"/>
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="FK_RP_ROLE"
								 baseTableName="ROLE_PERMISSION" baseColumnNames="ID_ROLE"
								 referencedTableName="ROLE" referencedColumnNames="ID"/>

		<addForeignKeyConstraint constraintName="FK_RP_PERMISSION"
								 baseTableName="ROLE_PERMISSION" baseColumnNames="ID_PERMISSION"
								 referencedTableName="PERMISSION" referencedColumnNames="ID"/>

		<rollback>
			<dropForeignKeyConstraint constraintName="FK_RP_ROLE" baseTableName="ROLE_PERMISSION"/>
			<dropForeignKeyConstraint constraintName="FK_RP_PERMISSION" baseTableName="ROLE_PERMISSION"/>
			<dropTable tableName="ROLE_PERMISSION"/>
		</rollback>
	</changeSet>

	<changeSet id="05" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="ACCOUNT_ROLE">
			<column name="ID_ACCOUNT" type="INTEGER">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="ID_ROLE" type="INTEGER">
				<constraints nullable="false" primaryKey="true"/>
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="FK_AR_ACCOUNT"
								 baseTableName="ACCOUNT_ROLE" baseColumnNames="ID_ACCOUNT"
								 referencedTableName="ACCOUNT" referencedColumnNames="ID"/>

		<addForeignKeyConstraint constraintName="FK_AR_ROLE"
								 baseTableName="ACCOUNT_ROLE" baseColumnNames="ID_ROLE"
								 referencedTableName="ROLE" referencedColumnNames="ID"/>

		<rollback>
			<dropForeignKeyConstraint constraintName="FK_AR_ACCOUNT" baseTableName="ACCOUNT_ROLE"/>
			<dropForeignKeyConstraint constraintName="FK_AR_ROLE" baseTableName="ACCOUNT_ROLE"/>
			<dropTable tableName="ACCOUNT_ROLE"/>
		</rollback>
	</changeSet>

	<changeSet id="06" author="ikhalopik@gmail.com" context="init">
		<insert tableName="ACCOUNT">
			<column name="ID" valueNumeric="1"/>
			<column name="EMAIL" value="admin@example.com"/>
			<column name="PASSWORD" value="21232f297a57a5a743894a0e4a801fc3"/>
		</insert>

		<rollback>
			<delete tableName="ACCOUNT">
				<where>EMAIL='admin@example.com'</where>
			</delete>
		</rollback>
	</changeSet>

	<changeSet id="07" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="LEVEL">
			<column name="ID" type="INTEGER" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="CODE" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>
			<column name="RATING" type="INTEGER">
				<constraints nullable="false"/>
			</column>
			<column name="VERSION" type="INTEGER" defaultValueNumeric="0">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addUniqueConstraint tableName="LEVEL" columnNames="CODE"
							 constraintName="UK_LEVEL_CODE"/>

		<rollback>
			<dropTable tableName="LEVEL"/>
		</rollback>
	</changeSet>

	<changeSet id="08" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="CARD">
			<column name="ID" type="INTEGER" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="CODE" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>

			<column name="CARD_TYPE" type="INTEGER" defaultValue="0">
				<constraints nullable="false"/>
			</column>
			<column name="ID_LEVEL" type="INTEGER">
				<constraints nullable="false"/>
			</column>

			<column name="VERSION" type="INTEGER" defaultValueNumeric="0">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addUniqueConstraint tableName="CARD" columnNames="CODE"
							 constraintName="UK_CARD_CODE"/>

		<addForeignKeyConstraint constraintName="FK_CARD_LEVEL"
								 baseTableName="CARD" baseColumnNames="ID_LEVEL"
								 referencedTableName="LEVEL" referencedColumnNames="ID"/>

		<rollback>
			<dropForeignKeyConstraint baseTableName="CARD" constraintName="FK_CARD_LEVEL"/>
			<dropTable tableName="CARD"/>
		</rollback>
	</changeSet>

	<changeSet id="09" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="EFFECT">
			<column name="ID" type="INTEGER" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="CODE" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>

			<column name="TARGET_TYPE" type="INTEGER" defaultValue="0">
				<constraints nullable="false"/>
			</column>

			<column name="ATTACK" type="INTEGER">
				<constraints nullable="false"/>
			</column>
			<column name="DEFENCE" type="INTEGER">
				<constraints nullable="false"/>
			</column>

			<column name="VERSION" type="INTEGER" defaultValueNumeric="0">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addUniqueConstraint tableName="EFFECT" columnNames="CODE"
							 constraintName="UK_EFFECT_CODE"/>

		<rollback>
			<dropTable tableName="EFFECT"/>
		</rollback>
	</changeSet>

	<changeSet id="10" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="EFFECT_CARD">
			<column name="ID" type="INTEGER">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="ID_EFFECT" type="INTEGER">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="FK_ECARD_CARD"
								 baseTableName="EFFECT_CARD" baseColumnNames="ID"
								 referencedTableName="CARD" referencedColumnNames="ID"/>

		<addForeignKeyConstraint constraintName="FK_ECARD_EFFECT"
								 baseTableName="EFFECT_CARD" baseColumnNames="ID_EFFECT"
								 referencedTableName="EFFECT" referencedColumnNames="ID"/>

		<rollback>
			<dropForeignKeyConstraint baseTableName="EFFECT_CARD" constraintName="FK_ECARD_CARD"/>
			<dropForeignKeyConstraint baseTableName="EFFECT_CARD" constraintName="FK_ECARD_EFFECT"/>
			<dropTable tableName="EFFECT_CARD"/>
		</rollback>
	</changeSet>

	<changeSet id="11" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="SUMMON">
			<column name="ID" type="INTEGER" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="CODE" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>

			<column name="ATTACK" type="INTEGER">
				<constraints nullable="false"/>
			</column>
			<column name="DEFENCE" type="INTEGER">
				<constraints nullable="false"/>
			</column>

			<column name="VERSION" type="INTEGER" defaultValueNumeric="0">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addUniqueConstraint tableName="SUMMON" columnNames="CODE"
							 constraintName="UK_SUMMON_CODE"/>

		<rollback>
			<dropTable tableName="SUMMON"/>
		</rollback>
	</changeSet>

	<changeSet id="12" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="SUMMON_CARD">
			<column name="ID" type="INTEGER">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="ID_SUMMON" type="INTEGER">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="FK_SCARD_CARD"
								 baseTableName="SUMMON_CARD" baseColumnNames="ID"
								 referencedTableName="CARD" referencedColumnNames="ID"/>

		<addForeignKeyConstraint constraintName="FK_SCARD_SUMMON"
								 baseTableName="SUMMON_CARD" baseColumnNames="ID_SUMMON"
								 referencedTableName="SUMMON" referencedColumnNames="ID"/>

		<rollback>
			<dropForeignKeyConstraint baseTableName="SUMMON_CARD" constraintName="FK_SCARD_CARD"/>
			<dropForeignKeyConstraint baseTableName="SUMMON_CARD" constraintName="FK_SCARD_SUMMON"/>
			<dropTable tableName="SUMMON_CARD"/>
		</rollback>
	</changeSet>

	<changeSet id="13" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="HERO">
			<column name="ID" type="INTEGER" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"/>
			</column>

			<column name="ID_ACCOUNT" type="INTEGER">
				<constraints nullable="false"/>
			</column>

			<column name="NAME" type="VARCHAR(100)">
				<constraints nullable="false"/>
			</column>
			<column name="RATING" type="INTEGER">
				<constraints nullable="false"/>
			</column>

			<column name="ID_LEVEL" type="INTEGER">
				<constraints nullable="false"/>
			</column>

			<column name="ATTACK" type="INTEGER">
				<constraints nullable="false"/>
			</column>
			<column name="DEFENCE" type="INTEGER">
				<constraints nullable="false"/>
			</column>

			<column name="VERSION" type="INTEGER" defaultValueNumeric="0">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="FK_HERO_ACCOUNT"
								 baseTableName="HERO" baseColumnNames="ID_ACCOUNT"
								 referencedTableName="ACCOUNT" referencedColumnNames="ID"/>

		<addForeignKeyConstraint constraintName="FK_HERO_LEVEL"
								 baseTableName="HERO" baseColumnNames="ID_LEVEL"
								 referencedTableName="LEVEL" referencedColumnNames="ID"/>

		<rollback>
			<dropForeignKeyConstraint baseTableName="HERO" constraintName="FK_HERO_ACCOUNT"/>
			<dropForeignKeyConstraint baseTableName="HERO" constraintName="FK_HERO_LEVEL"/>
			<dropTable tableName="HERO"/>
		</rollback>
	</changeSet>

	<changeSet id="14" author="ikhalopik@gmail.com" context="schema">
		<createTable tableName="HERO_CARD">
			<column name="ID" type="INTEGER" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"/>
			</column>

			<column name="ID_HERO" type="INTEGER">
				<constraints nullable="false"/>
			</column>
			<column name="ID_CARD" type="INTEGER">
				<constraints nullable="false"/>
			</column>

			<column name="RATING" type="INTEGER">
				<constraints nullable="false"/>
			</column>

			<column name="VERSION" type="INTEGER" defaultValueNumeric="0">
				<constraints nullable="false"/>
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="FK_HCARD_HERO"
								 baseTableName="HERO_CARD" baseColumnNames="ID_HERO"
								 referencedTableName="HERO" referencedColumnNames="ID"/>

		<addForeignKeyConstraint constraintName="FK_HCARD_CARD"
								 baseTableName="HERO_CARD" baseColumnNames="ID_CARD"
								 referencedTableName="CARD" referencedColumnNames="ID"/>

		<rollback>
			<dropForeignKeyConstraint baseTableName="HERO_CARD" constraintName="FK_HCARD_CARD"/>
			<dropForeignKeyConstraint baseTableName="HERO_CARD" constraintName="FK_HCARD_HERO"/>
			<dropTable tableName="HERO_CARD"/>
		</rollback>
	</changeSet>

</databaseChangeLog>